<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WhoCharGame</title>
    <link rel="icon" type="image/svg+xml" href="/assets/icon.svg" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body class="min-h-screen bg-[#0b1220] text-white antialiased">
    <main class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
      <header class="text-center space-y-2">
        <div class="flex items-center justify-center gap-2">
          <img src="assets/icon.svg" alt="Icon game WhoCharGame" />
          <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">
            WhoCharGame
          </h1>
        </div>
      </header>

      <section class="mt-8 sm:mt-10">
        <div
          class="mx-auto max-w-3xl rounded-2xl bg-slate-800/40 ring-1 ring-white/10 shadow-xl p-5 sm:p-8"
        >
          <h2 class="text-center text-2xl sm:text-3xl font-semibold">
            ¿Quién es?
          </h2>

          <div class="mt-6 sm:mt-8">
            <div class="mx-auto w-full sm:w-[480px]">
              <div
                class="aspect-[16/9] overflow-hidden rounded-lg ring-1 ring-white/10"
              >
                <img
                  id="charImg"
                  src="/assets/chars/Leon Scott Kennedy.jpg"
                  alt="Character"
                  class="h-full w-full object-cover blur-xl transition-all duration-500"
                />
              </div>
            </div>
          </div>

          <div class="mt-6 sm:mt-8 flex justify-center">
            <select
              id="guess"
              class="w-full sm:w-[480px] rounded-lg bg-slate-700 text-white px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-violet-400"
            >
              <option value="">Seleccionar personaje...</option>
              <option>Leon Scott Kennedy</option>
              <option>Chris Redfield</option>
              <option>Jill Valentine</option>
              <option>Ada Wong</option>
              <option>Crash Bandicoot</option>
              <option>Master Chief</option>
            </select>
          </div>

          <div
            class="mt-6 sm:mt-8 flex items-center justify-center gap-4 sm:gap-6"
          >
            <span class="text-slate-300 text-base sm:text-lg">Trys</span>
            <div id="tries" class="flex items-center gap-3 sm:gap-4">
              <span
                class="try size-9 sm:size-10 rounded-md ring-1 ring-white/10 grid place-content-center font-bold"
                >?</span
              >
              <span
                class="try size-9 sm:size-10 rounded-md ring-1 ring-white/10 grid place-content-center font-bold"
                >?</span
              >
              <span
                class="try size-9 sm:size-10 rounded-md ring-1 ring-white/10 grid place-content-center font-bold"
                >?</span
              >
              <span
                class="try size-9 sm:size-10 rounded-md ring-1 ring-white/10 grid place-content-center font-bold"
                >?</span
              >
              <span
                class="try size-9 sm:size-10 rounded-md ring-1 ring-white/10 grid place-content-center font-bold"
                >?</span
              >
            </div>
          </div>

          <div class="mt-7 sm:mt-9 flex justify-center">
            <button
              class="px-6 sm:px-7 py-2.5 sm:py-3 rounded-lg bg-[#3a83f6] hover:bg-[#2f73db] font-semibold uppercase tracking-wide ring-1 ring-white/10"
            >
              VOLVER
            </button>
          </div>
        </div>
      </section>
    </main>

    <script>
      const correctAnswer = "Leon Scott Kennedy"; // la respuesta correcta
      let tries = 0;
      const maxTries = 5;
      const blurLevels = ["blur-xl", "blur-lg", "blur-md", "blur", "blur-0"];

      const img = document.getElementById("charImg");
      const guess = document.getElementById("guess");
      const triesBoxes = Array.from(document.querySelectorAll("#tries .try"));

      function updateBlur() {
        const idx = Math.min(tries, blurLevels.length - 1);
        img.className =
          "h-full w-full object-cover transition-all duration-500 " +
          blurLevels[idx];
      }

      guess.addEventListener("change", () => {
        if (!guess.value || tries >= maxTries) return;

        const currentBox = triesBoxes[tries];

        if (guess.value === correctAnswer) {
          // correcto → verde y revelar foto
          currentBox.textContent = "✓";
          currentBox.className =
            "try size-9 sm:size-10 rounded-md ring-1 ring-white/10 bg-green-500/90 grid place-content-center font-bold";
          tries = maxTries; // para que no siga contando
          img.className =
            "h-full w-full object-cover transition-all duration-500 blur-0";
          guess.disabled = true; // bloquear select
        } else {
          // incorrecto → rojo
          currentBox.textContent = "X";
          currentBox.className =
            "try size-9 sm:size-10 rounded-md ring-1 ring-white/10 bg-red-500/90 grid place-content-center font-bold";
          tries++;
          updateBlur();
        }
      });

      updateBlur();
    </script>
  </body>
</html>
